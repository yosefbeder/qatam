استورد { شرّح } من "الأساسية"

# ترجع نصاً ناتجاً عن ربط عناصر "قائمة" باستخدام "رابط".
صدّر دالة إربط(قائمة، رابط) {
  متغير عداد = 0، الناتج = ""
  إن(حجم(قائمة) > 0) {
    الناتج += قائمة[0]
    عداد += 1
  } إلا {
    أرجع الناتج
  }
  طالما(عداد < حجم(قائمة)) {
    الناتج += رابط + قائمة[عداد]
    عداد += 1
  }
  أرجع الناتج
}
# إطبع(إربط(["يوسف"، "عبد"، "الفتاح"]، " "))
# إطبع(إربط(["يوسف"]، " "))
# إطبع(إربط([]، " "))

# ترجع قائمة من النصوص  
صدّر دالة فرّق(نص، فرق) {
  متغير الناتج = []، آخر_فرق = 0، عداد = 0
  طالما(عداد < حجم(نص)) {
    إن(عداد + حجم(فرق) > حجم(نص)) { إكسر }
    إن(شرّح(نص، عداد، عداد + حجم(فرق)) == فرق) {
      إدفع(الناتج، شرّح(نص، 0، عداد))
      نص = شرّح(نص، عداد + حجم(فرق))
      عداد = 0
    } إلا { 
      عداد += 1
    }
  }
  إدفع(الناتج، نص)
  أرجع الناتج
}
# إطبع(فرّق("السلام، عليكم، ورحمة، الله، وبركاته،"، "، "))

# ترجع ما إذا كان "نص" يبدأ ب"بادئة" أم لا.
صدّر دالة يبدأ_ب(نص، بادئة) {
  إن(شرّح(نص، 0، حجم(بادئة)) == بادئة) {
    أرجع صحيح
  }
  أرجع خطأ
}
# إطبع(يبدأ_ب("السلام عليكم"، "السلام"))

# ترجع ما إذا كان "نص" ينهي ب"لاحقة" أم لا.
صدّر دالة ينتهي_ب(نص، لاحقة) {
  إن(شرّح(نص، حجم(نص) - حجم(لاحقة)) == لاحقة) {
    أرجع صحيح
  }
  أرجع خطأ
}
# إطبع(ينتهي_ب("السلام عليكم"، "عليكم"))

# ترجع موقع "جزء" في "نص".
# ترجع عدم في حالة عدم وجود العنصر.
صدّر دالة إبحث(نص، جزء) {
  متغير عداد = 0
  طالما(عداد < حجم(نص)) {
    إن(عداد + حجم(جزء) > حجم(نص)) {
      أرجع عدم
    }
    إن(شرّح(نص، عداد، عداد + حجم(جزء)) == جزء) {
      أرجع عداد
    }
    عداد += 1
  }
}
# إطبع(إبحث("السلام عليكم"، "كم"))
# إطبع(إبحث("السلام عليكم"، "كميت"))

# ترجع ما إذا كان "نص" يتضمن "جزء".
صدّر دالة يتضمن(نص، جزء) {
  أرجع إبحث(نص، جزء) != عدم
}
# إطبع(يتضمن("السلام عليكم"، "السلام"))

# ترجع نصاً جديداً تم استبدال "مستبدَل" فيه ب"مستبدِل".
صدّر دالة استبدل(نص، مستبدَل، مستبدِل) {
  متغير عداد = 0، الناتج = ""
  طالما(عداد < حجم(نص)) {
    إن(عداد + حجم(مستبدَل) > حجم(نص)) { إكسر }
    إن(شرّح(نص، عداد، عداد + حجم(مستبدَل)) == مستبدَل) {
      الناتج += مستبدِل
      عداد += حجم(مستبدَل)
    } إلا {
      الناتج += نص[عداد]
      عداد += 1
    }
  }
  أرجع الناتج += شرّح(نص، عداد)
}
# إطبع(استبدل("السلام عليكمورحمة اللهوبركاته"، "و"، " و"))
# إطبع(استبدل("السلام عليكم ورحمة الله وبركاته"، "ته"، "تهو"))

# تقوم بمسح المسافات الفارغة (whitespaces) من أول النص
صدّر دالة قلّم_بداية(نص) {
  ألقي "لم تكتب بعد"
}

# تقوم بمسح المسافات الفارغة (whitespaces) من آخر النص
صدّر دالة قلّم_نهاية(نص) {
  ألقي "لم تكتب بعد"
}

# تقوم بمسح المسافات الفارغة (whitespaces) من أول وآخر النص
صدّر دالة قلّم(نص) {
  ألقي "لم تكتب بعد"
}
